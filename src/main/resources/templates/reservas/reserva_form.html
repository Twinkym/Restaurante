<!DOCTYPE html>
<html lang="es/ES" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <meta content="David De La Puente, Luis Miguel" name="Author">
    <link rel="icon" th:href="@{/img/logos/logotipo_restaurante.png}" type="image/x-icon">
    <title th:text="${titulo}">Reserva de Mesa</title>
    <!-- Bootstrap 5 -->
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- -->
    <!-- Ruta Archivos Estáticos -->
    <link rel="stylesheet" th:href="@{/css/detalles.css}">
    <link rel="stylesheet" th:href="@{/css/menu-circular.css}">
</head>
<body class="container mt-4">

<!-- FRAGMENTO HEADER CON TITULO DINÁMICO-->
<div th:replace="~{fragments/header :: header(${pagina.titulo})}"></div>

<!-- =========================================== -->
<!-- ===== SECCIÓN DEL FORMULARIO RESERVAS ===== -->
<!-- =========================================== -->
<!-- ============================== -->
<!-- =====
    EN ESTA SECCIÓN EXISTEN ALGUNOS ERRORES QUE HAY QUE CORREGIR COMO
    SON REFERENCÍAS INVALIDAS EN LAS ETIQUETAS LABEL, COMENSALES, ASOCIACIONES
    ERRÓNEAS ENTRE INPUTS Y SUS LABELS SON TÍPICOS FALLOS DE LAS PRISAS O CODIFICAR
    ESTANDO CANSADO NADA QUE NO TENGA SOLUCIÓN.
    ===== -->
<!-- ============================== -->
<main class="container mt-4" >

    <h2>Hacer una Reserva</h2>

    <form class="needs-validation" method="post" novalidate th:action="@{/reservas/guardar}" th:object="${reservaFormDTO}">
        <!.. Fecha de reserva -->
        <div class="mb-3">
            <label class="form-label" for="fecha">
                <i class="bi bi-calendar-event"></i> Fecha:
            </label>
            <label>
                <input class="form-control" id="fecha" required th:field="*{fecha}" type="date"/>
            </label>
        </div>

        <!-- Número de comensales -->
        <div class="mb-3">
            <label class="form-label" for="numComensales">
                <i class="bi bi-people-fill"></i> Número de personas:
            </label>
            <label>
                <select class="form-select" id="numComensales" th:field="*{numComensales}">
                    <option disabled selected value="">Seleccione una opción</option>
                    <option th:each="num : ${capacidades}" th:text="${num}" th:value="${num}"></option>
                </select>
            </label>
        </div>

        <!-- Turnos disponibles -->
        <div class="mb-3" th:if="${mostrarTurnos}">
            <label class="form-label">
                <i class="bi bi-clock-history"></i> Seleccione un turno:
            </label>
            <div class="d-flex flex-wrap gap-2">
                <div th:each="turno : ${turnosDisponibles}">
                    <label>
                        <input class="btn-check" name="horaTurno" th:field="*{horaTurno}" th:id="${turno.hora}" th:value="${turno.hora}" type="radio">
                    </label>
                    <label class="btn btn-outline-primary" th:for="${turno.hora}" th:text="${turno.hora"></label>
                </div>
            </div>
            <input id="horaSeleccionada" th:field="*{hora}" type="hidden"/>
        </div>

        <!-- Botón Reservar -->
        <div class="mt-4 text-center">
            <button class="btn btn-primary" type="submit">
                <i class="bi bi-check-circle-fill"></i> Reservar
            </button>
        </div>

    </form>

    <div class="mt-3" th:if="${mensaje}">
        <div class="alert alert-info" th:text="${mensaje}"></div>
    </div>

</main>

<!-- ============================== -->
<!-- ===== SECCIÓN DEL FOOTER ===== -->
<!-- ============================== -->
<div th:replace="~{fragments/footer :: footer}">
    <!-- Contenido del Footer -->
</div>

</body>
</html>
