<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <meta content="David De La Puente, Luis Miguel" name="Author">
    <link rel="icon" th:href="@{/img/logos/logotipo_restaurante.png}" type="image/x-icon">
    <title th:text="${tituloPagina}">Contacto</title>
    <!-- Bootstrap 5 -->
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- FONT-AWESOME -->
    <link rel="stylesheet" th:href="@{/webjars/font-awesome/css/all.css}">
    <!-- Ruta Archivos Estáticos -->
    <link rel="stylesheet" th:href="@{/css/detalles.css}">
    <link rel="stylesheet" th:href="@{/css/menu-circular.css}">
</head>
<body>
<!-- Insertar Cabecera  -->
<div th:replace="~{fragments/header :: header(${tituloPagina})}"></div>
<main class="container mt-4 mb-5" th:replace="layout :: contenido" th:with="tituloPagina='Contacto', footerEspecial=~{fragments-contacto :: footerContacto}">
    <!-- Título principal de la página, centrado con margen inferior. -->
    <h2 class="mb-4 text-center" th:text="${tituloPagina}">Contacta con Nosotros</h2>
    <p>Estaremos encantados de atenderte.</p>
    <hr class="mb-4">

    <!-- Sección para mostrar mensajes de éxito o error. (flash messages -->
    <div class="alert alert-success alert-dismissible fade show" role="alert" th:if="${mensaje}">
        <i class="fa-solid fa-check-circle me-1"></i>
        <span th:text="${mensaje}"></span>
        <button aria-label="Cerrar mensaje" class="btn-close" data-bs-dismiss="alert" type="button"></button>
    </div>
    <div class="alert alert-danger alert-dismissible fade show" role="alert" th:if="${error}">
        <i class="fa-solid fa-triangle-exclamation me-1"></i>
        <span th:text="${error}"></span>
        <button aria-label="Cerrar mensaje" class="btn-close" data-bs-dismiss="alert" type="button"></button>
    </div>

    <!-- Formulario de Contacto -->
    <!-- th:object vincula el formulario a la instancia de ContactoFormDTO en el modelo.
         th:action define la URL a la que se enviará el formulario (POST /contacto).
         novalidate: Deshabilita la validación HTML5 predeterminada del navegador para usar la validación de Bootstrap/servidor.
         class="needs-validation": Clase de Bootstrap para estilos de validación. -->
    <form class="needs-validation mx-auto p-4 border rounded shadow-sm" method="post" novalidate style="max-width: 600px;" th:action="@{/contacto}" th:object="${contactoForm}">
        <!-- Campo Nombre -->
        <div class="mb-3">
            <label class="form-label" for="nombre">Nombre:</label>
            <!-- th:field="*{nombre}" se encarga de name, id y value, y errores de validación. -->
            <input aria-describedby="nombreHelp" class="form-control" id="nombre" required th:field="*{nombre}" type="text">
            <!-- th:errors muestra los mensajes de error de validación del servidor. -->
            <div class="invalid-feedback" th:errors="*{nombre}"></div>
            <div class="form-text visually-hidden" id="nombreHelp">Introduce tu completo.</div>
        </div>

        <!-- Campo Asunto -->
        <div class="mb-3">
            <label class="form-label" for="asunto">Asunto:</label>
            <input aria-describedby="asuntoHelp" class="form-control" id="asunto" required th:field="*{asunto}" type="text">
            <div class="invalid-feedback" th:errors="*{asunto}"></div>
            <div class="form-text visually-hidden" id="asuntoHelp">Introduce el asunto de tu mensaje.</div>
        </div>

        <!-- Campo Mensaje -->
        <div class="mb-3">
            <label class="form-label" for="mensaje">Mensaje:</label>
            <textarea aria-describedby="mensajeHelp" class="form-control" id="mensaje" required rows="5" th:field="*{mensaje}"></textarea>
            <div class="invalid-feedback" th:errors="*{mensaje}"></div>
            <div class="form-text visually-hidden" id="mensajeHelp">Escribe tu mensaje aquí.</div>
        </div>

        <!-- Checkbox de Privacidad -->
        <div class="mb-3 form-check">
            <input aria-describedby="privacidadHelp" class="form-check-input" id="aceptarPrivacidad" required th:field="*{aceptarPrivacidad}" type="checkbox">
            <label class="form-check-label" for="aceptarPrivacidad">
                Acepto la <a aria-label="Leer política de privacidad" href="#" target="_blank">política de privacidad</a>.
            </label>
            <div class="invalid-feedback" th:errors="*{aceptarPrivacidad}"></div>
            <div class="form-text visually-hidden" id="PrivacidadHelp">Debes aceptar la política de privacidad para enviar el formulario-</div>
        </div>

        <!-- Checkbox de Marketing (Opcional)-->
        <div class="mb-3 form-check">
            <input aria-describedby="marketingHelp" class="form-check-input" id="AceptarMarketing" th:field="*{aceptarMarketing}" type="checkbox">
            <label class="form-check-label" for="AceptarMarketing">Deseo recibir comunicaciones comerciales.</label>
            <div class="form-text visually-hidden" id="MarketingHelp">Marca esta casilla si deseas recibir ofertas y noticias.</div>
        </div>

        <!-- Botón de Envío -->
        <div class="d-grid mt-4">
            <button class="btn btn-primary btn-lg" type="submit"><i class="fa-solid fa-paper-plane me-2"></i>Enviar Mensaje</button>
        </div>
    </form>
</main>
<div th:replace="~{fragments/__${footerType}__} :: __${footerType}__"></div>

<!-- Bootstrap 5 JavaScript Bundle con Popper -->
<script th:src="@{/webjars/bootstrap/js/bootstrap.bundle.min.js}"></script>
<!-- Script JavaScript externo para la activación de la validación visual de Bootstrap. -->
<script th:src="@{/js/form-validation.js}"></script>
</body>
</html>